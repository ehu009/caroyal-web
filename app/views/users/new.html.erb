
<h2>New User</h2>
<%= session[:create_params]['city'] %>

<%= form_for @user do |f| %>
<div class="container-fluid row">
    <p>
        <div class="col-md-4 col-sm-12 form-field">
            <%= f.label :phone_number %>
            <span style="right:0px; color: red">*</span>
        </div>
        <div class="col-md-8 col-sm-12 form-field">
            <%= f.number_field :phone_number, value: session[:create_params]["phone_number"], style: "width:100%;", class: "hidden-arrows" %>
        </div>
        <div class="col-md-4 col-sm-12 form-field">
            <%= f.label :email %>
        </div>
        <div class="col-md-8 col-sm-12 form-field">
            <%= f.text_field :email, value: session[:create_params]["email"], style: "width:100%;" %>
        </div>
        <div class="col-md-4 col-sm-12 form-field">
            <%= f.label :password %>
            <span style="right:0px; color: red">*</span>
        </div>
        <div class="col-md-8 col-sm-12 form-field">
            <%= f.password_field :password, style: "width:100%;" %>
        </div>
    </p>
    <hr class="dark-blue-text">

    <h5>Business details</h5>

    <p>
        <div class="col-md-4 col-sm-12 form-field">
            <%= f.label :company_name %>
            <span style="right:0px; color: red">*</span>
        </div>
        <div class="col-md-8 col-sm-12 form-field">
            <%= f.text_field :company_name, value: session[:create_params]["company_name"], style: "width:100%;" %>
        </div>
        <div class="col-md-4 col-sm-12 form-field">
            <%= f.label :company_address %>
            <span style="right:0px; color: red">*</span>
        </div>
        <div class="col-md-8 col-sm-12 form-field">
            <%= f.text_field :company_address, value: session[:create_params]["company_address"], style: "width:100%;" %>
        </div>
        <div class="col-md-4 col-sm-12 form-field">
            <%= f.label :company_country %>
        </div>
        <div class="col-md-8 col-sm-12 form-field">
            <%= f.country_select :company_country, value: session[:create_params]["company_country"], include_blank: 'Select a country' %>
        </div>
        <div class="col-md-4 col-sm-12 form-field">
            <%= f.label :company_city %>
        </div>
        <div class="col-md-8 col-sm-12 form-field">
            <%= f.select :company_city, [], value: session[:create_params]["company_city"], style: "width:100%" %>
        </div>


        <div class="col-md-4 col-sm-12 form-field">
            <%= f.label :tax_identification_number, "TIN (tax ID)" %>
            <span style="right:0px; color: red">*</span>
        </div>
        <div class="col-md-8 col-sm-12 form-field">
            <%= f.number_field :tax_identification_number, value: session["create_params"]["tax_identification_number"], style: "width:100%;", class: "hidden-arrows" %>
        </div>
        <div class="col-md-3 col-sm-6 form-field">
            <%= f.label :producer %>
        </div>
        <div class="col-md-3 col-sm-6 form-field">
            <%= f.check_box :producer, checked: session[:create_params]["producer"], class: "form-check-input" %>
        </div>
        
        <div class="col-md-3 col-sm-6 form-field">
            <%= f.label :distributor %>
        </div>
        <div class="col-md-3 col-sm-6 form-field">
            <%= f.check_box :distributor, checked: session[:create_params]["distributor"], class: "form-check-input" %>
        </div>
        
    
    </p>
    <hr class="dark-blue-text">
    
    <h5>Personal details</h5>
    <p>


        <div class="col-md-4 col-sm-12 form-field">
            <%= f.label :name_prefix %>
            <span style="right:0px; color: red">*</span>
        </div>
        <div class="col-md-8 col-sm-12 form-field">
            <%= f.select :name_prefix, ["Mr", "Mrs", "Ms"], value: session["create_params"][:name_prefix] %>
        </div>
        
        <div class="col-md-4 col-sm-12 form-field">
            <%= f.label :first_name %>
            <span style="right:0px; color: red">*</span>
        </div>
        <div class="col-md-8 col-sm-12 form-field">
            <%= f.text_field :first_name, value: session[:create_params]["first_name"], style: "width:100%;" %>
        </div>
        <div class="col-md-4 col-sm-12 form-field">
            <%= f.label :last_name, "Surname"%>
            <span style="right:0px; color: red">*</span>
        </div>
        <div class="col-md-8 col-sm-12 form-field">
            <%= f.text_field :last_name, value: session[:create_params]["last_name"], style: "width:100%;" %>
        </div>
        <div class="col-md-4 col-sm-12 form-field">
            <%= f.label :date_of_birth %>
        </div>
        <div class="col-md-8 col-sm-12 form-field">
            <%= f.date_field :date_of_birth, value: session[:create_params]["date_of_birth"] %>
        </div>


        <div class="col-md-4 col-sm-12 form-field">
            <%= f.label :address %>
        </div>
        <div class="col-md-8 col-sm-12 form-field">
            <%= f.text_field :address, value: session[:create_params]["address"], style: "width:100%;" %>
        </div>
        <div class="col-md-4 col-sm-12 form-field">
            <%= f.label :country %>
        </div>
        <div class="col-md-8 col-sm-12 form-field">
            <%= f.country_select :country, selected: session[:create_params]["country"], include_blank: 'Select a country' %>
        </div>
        <div class="col-md-4 col-sm-12 form-field">
            <%= f.label :city %>
        </div>
        <div class="col-md-8 col-sm-12 form-field">
            <%= f.select :city, [], selected: session[:create_params]["city"], style: "width:100%" %>
        </div>
    </p>

    <p>
        <div class="col-md-4 col-sm-0">
        </div>
        <div class="col-md-8 col-sm-12">
            <%= f.submit "Create Account", class: "form-btn blue-bg white-text" %>
        </div>
    </p>
</div>
<% end %>

<script>
        
    window.onload = function() {
        
        cityData = getCityData("https://raw.githubusercontent.com/lutangar/cities.json/master/cities.json");
        
        initCitySelector("user_country", "user_city", "<%= session[:create_params]['country'] %>", "<%= session[:create_params]['city'] %>");
        initCitySelector("user_company_country", "user_company_city", "<%= session[:create_params]['company_country'] %>", "<%= session[:create_params]['company_country'] %>");
        
    }
</script>
